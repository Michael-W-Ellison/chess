<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safety Alert - {{ child_name }}</title>
</head>
<body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #1f2937; margin: 0; padding: 0; background-color: #f3f4f6;">
    <div style="max-width: 600px; margin: 0 auto; padding: 20px;">

        <!-- Header -->
        <div style="background-color: {{ severity_color }}; color: white; padding: 25px 30px; border-radius: 12px 12px 0 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h1 style="margin: 0; font-size: 28px; font-weight: 700;">{{ alert_icon }} {{ alert_title }}</h1>
            <p style="margin: 12px 0 0 0; font-size: 16px; opacity: 0.95;">
                {{ timestamp }}
            </p>
        </div>

        <!-- Severity Badge -->
        <div style="background-color: #fef2f2; border-left: 6px solid {{ severity_color }}; padding: 20px; margin: 0;">
            <p style="margin: 0; color: #991b1b; font-weight: 700; font-size: 16px;">
                Severity: {{ severity|upper }}
            </p>
        </div>

        <!-- Main Content -->
        <div style="background-color: #ffffff; padding: 35px 30px; border: 1px solid #e5e7eb; border-top: none;">

            <h2 style="color: #111827; margin-top: 0; font-size: 22px; font-weight: 700;">What Happened</h2>
            <p style="font-size: 16px; color: #374151; line-height: 1.7; margin-bottom: 25px;">
                {{ message }}
            </p>

            {% if content_snippet %}
            <div style="background-color: #fef2f2; border: 2px solid #fee2e2; border-radius: 8px; padding: 20px; margin-bottom: 25px;">
                <h3 style="color: #991b1b; margin-top: 0; margin-bottom: 10px; font-size: 14px; font-weight: 700; text-transform: uppercase;">Content Detected:</h3>
                <p style="color: #374151; font-style: italic; margin: 0; font-size: 15px; line-height: 1.6;">
                    "{{ content_snippet }}"
                </p>
            </div>
            {% endif %}

            <h2 style="color: #111827; margin-top: 35px; font-size: 22px; font-weight: 700;">Recommended Action</h2>
            <p style="font-size: 16px; color: #374151; line-height: 1.7; margin-bottom: 25px;">
                {{ action_message }}
            </p>

            <!-- Crisis Resources -->
            {% if resources %}
            <div style="background-color: #f0fdf4; border: 2px solid #86efac; border-radius: 10px; padding: 25px; margin-top: 30px;">
                <h3 style="margin-top: 0; color: #15803d; font-size: 18px; font-weight: 700;">ðŸ“ž Crisis Resources:</h3>
                <ul style="margin: 15px 0; padding-left: 20px; color: #166534;">
                    {% for resource in resources %}
                    <li style="margin: 10px 0; font-size: 15px; line-height: 1.5;">{{ resource }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <div style="margin-top: 35px; padding-top: 25px; border-top: 2px solid #e5e7eb;">
                <p style="font-size: 14px; color: #6b7280; margin: 0; line-height: 1.6;">
                    This notification was generated automatically by the safety monitoring system.
                    You can review the full conversation details in the parent dashboard.
                </p>
            </div>

        </div>

        <!-- Footer -->
        <div style="background-color: #f9fafb; padding: 20px 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 12px 12px; text-align: center;">
            <p style="font-size: 12px; color: #9ca3af; margin: 0; line-height: 1.5;">
                To disable these notifications, adjust your settings in the parent dashboard.
            </p>
        </div>

    </div>
</body>
</html>
